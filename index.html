<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Atendente AI - IA Magn√©tica i Cume</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for chat messages */
        #chat-messages::-webkit-scrollbar {
            width: 8px;
        }
        #chat-messages::-webkit-scrollbar-track {
            background: #e2e8f0; /* light gray */
            border-radius: 10px;
        }
        .dark #chat-messages::-webkit-scrollbar-track {
            background: #4a5568; /* dark gray */
        }
        #chat-messages::-webkit-scrollbar-thumb {
            background: #a0aec0; /* medium gray */
            border-radius: 10px;
        }
        .dark #chat-messages::-webkit-scrollbar-thumb {
            background: #718096; /* darker gray */
        }
        #chat-messages::-webkit-scrollbar-thumb:hover {
            background: #718096; /* hover color */
        }
        .dark #chat-messages::-webkit-scrollbar-thumb:hover {
            background: #9fa6b2;
        }

        /* Custom bubble tail for sender (user) */
        .bubble-user::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: -6px; /* Adjust as needed */
            width: 0;
            height: 0;
            border-bottom: 6px solid #4f46e5; /* Tailwind indigo-600 */
            border-left: 6px solid transparent;
            border-right: 0px solid transparent;
            border-top: 0px solid transparent;
        }
        .dark .bubble-user::after {
            border-bottom: 6px solid #4f46e5; /* Tailwind indigo-600 */
        }

        /* Custom bubble tail for receiver (AI) */
        .bubble-ai::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: -6px; /* Adjust as needed */
            width: 0;
            height: 0;
            border-bottom: 6px solid #e5e7eb; /* Tailwind gray-200 */
            border-right: 6px solid transparent;
            border-left: 0px solid transparent;
            border-top: 0px solid transparent;
        }
        .dark .bubble-ai::after {
            border-bottom: 6px solid #4b5563; /* Tailwind gray-600 */
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900">
    <div class="flex flex-col h-screen antialiased text-gray-800 dark:text-gray-200 font-inter p-2 sm:p-4">
        <div class="flex flex-col flex-auto h-full rounded-xl bg-white dark:bg-gray-800 shadow-xl overflow-hidden">
            <!-- Chat Header -->
            <div class="p-4 sm:p-6 text-center border-b border-gray-200 dark:border-gray-700 flex flex-col items-center justify-center">
                <img
                    src="https://raw.githubusercontent.com/Felipegon9im/Chat-Ai/refs/heads/main/IMG_1539.jpeg"
                    alt="Foto de Perfil de Felipe Gondim"
                    class="w-16 h-16 rounded-full object-cover mb-2 border-2 border-indigo-500 shadow-md"
                    onerror="this.onerror=null; this.src='https://placehold.co/64x64/cccccc/333333?text=FG';"
                >
                <h1 class="text-xl sm:text-2xl font-extrabold text-gray-900 dark:text-white">Felipe Gondim</h1>
                <p class="text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1">
                    Conhe√ßa o curso "IA Magn√©tica i Cume" atrav√©s de um chat com IA!
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 flex-grow overflow-hidden">
                <!-- Se√ß√£o dos Recursos do Curso -->
                <div class="flex flex-col p-4 overflow-y-auto border-r border-gray-200 dark:border-gray-700 md:block hidden">
                    <h2 class="text-xl font-bold mb-3 text-gray-900 dark:text-white">Recursos do Curso "IA Magn√©tica i Cume"</h2>
                    <ul id="course-features-list" class="space-y-2">
                        <!-- Itens do curso ser√£o inseridos dinamicamente aqui -->
                    </ul>
                </div>

                <!-- Se√ß√£o do Chat -->
                <div class="flex flex-col flex-grow min-h-0">
                    <!-- Mensagens do chat -->
                    <div id="chat-messages" class="flex-grow overflow-y-auto p-4 space-y-4">
                        <!-- Mensagens do chat ser√£o inseridas dinamicamente aqui -->
                    </div>

                    <!-- √Årea de input do chat -->
                    <form id="chat-form" class="flex p-4 border-t border-gray-200 dark:border-gray-700">
                        <input
                            type="text"
                            id="user-input"
                            placeholder="Pergunte sobre o curso..."
                            class="flex-grow focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-300 shadow-inner"
                        />
                        <button
                            type="submit"
                            id="send-button"
                            class="ml-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out shadow-md transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
                            </svg>
                        </button>
                    </form>
                    <div id="loading-indicator" class="text-center text-sm text-gray-500 dark:text-gray-400 py-2 hidden">
                        Atendente digitando...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==============================================
        // DADOS DO CURSO
        // Estes dados ser√£o usados para preencher a se√ß√£o de "Recursos do Curso" e para instruir a IA.
        // ==============================================
        const courseFeatures = {
            "Acesso Vital√≠cio ao Conte√∫do Completo": "Estude no seu ritmo, quando quiser, para sempre.",
            "Uso Ilimitado da IA por 15 Meses": "Ferramenta para criar v√≠deos virais, usando recursos como o Google.",
            "Aprenda a Criar V√≠deos Virais": "M√≥dulos dedicados a estrat√©gias e t√©cnicas de viraliza√ß√£o de conte√∫do.",
            "Aprenda a Vender Seus V√≠deos": "Transforme visualiza√ß√µes em dinheiro, com m√©todos comprovados de monetiza√ß√£o.",
            "Desbloqueie o Potencial da IA": "Saiba como usar a intelig√™ncia artificial a seu favor na cria√ß√£o de conte√∫do.",
            "Curso IA Magn√©tica i Cume": "O caminho para dominar a IA na cria√ß√£o e monetiza√ß√£o de v√≠deos."
        };

        // Elementos da UI
        const courseFeaturesList = document.getElementById('course-features-list');
        const chatMessages = document.getElementById('chat-messages');
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const loadingIndicator = document.getElementById('loading-indicator');

        // Fun√ß√£o auxiliar para atrasar a execu√ß√£o
        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // Fun√ß√£o para exibir os recursos do curso na p√°gina
        function displayCourseFeatures() {
            courseFeaturesList.innerHTML = ''; // Limpa itens existentes antes de exibir
            for (const item in courseFeatures) {
                const li = document.createElement('li');
                li.className = "flex flex-col sm:flex-row justify-between items-start sm:items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg border border-gray-200 dark:border-gray-600";
                li.innerHTML = `
                    <span class="text-gray-800 dark:text-gray-100 text-sm font-medium text-left">${item}</span>
                    <span class="text-indigo-600 dark:text-indigo-400 font-bold text-right mt-1 sm:mt-0 whitespace-nowrap">${courseFeatures[item]}</span>
                `;
                courseFeaturesList.appendChild(li);
            }
        }

        // Fun√ß√£o para adicionar uma mensagem (texto ou v√≠deo) ao display do chat
        function addMessage(sender, content, type = 'text') {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;

            if (type === 'text') {
                const bubbleDiv = document.createElement('div');
                bubbleDiv.className = `relative max-w-[75%] px-4 py-2 rounded-2xl text-sm break-words ${
                    sender === 'user'
                        ? 'bg-indigo-600 text-white rounded-br-none bubble-user'
                        : 'bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-100 rounded-bl-none bubble-ai'
                } shadow`;

                // Regex para encontrar URLs no texto
                const urlRegex = /(https?:\/\/[^\s]+)/g;
                if (content.match(urlRegex)) {
                    // Se encontrar URLs, substitui por <a> tags
                    bubbleDiv.innerHTML = content.replace(urlRegex, (url) => {
                        return `<a href="${url}" target="_blank" rel="noopener noreferrer" class="text-blue-200 dark:text-blue-300 hover:underline font-semibold">${url}</a>`;
                    });
                } else {
                    bubbleDiv.textContent = content;
                }
                messageDiv.appendChild(bubbleDiv);

            } else if (type === 'video') {
                const videoContainer = document.createElement('div');
                // Estiliza√ß√£o para o cont√™iner do v√≠deo, centralizado na bolha da AI
                videoContainer.className = `relative w-64 h-40 sm:w-80 sm:h-52 rounded-lg overflow-hidden shadow-lg ${sender === 'user' ? 'ml-auto' : 'mr-auto'}`;
                // ID do YouTube Short: 099JIPUnPxE
                videoContainer.innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${content}?autoplay=0&controls=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                messageDiv.appendChild(videoContainer);
            }

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight; // Rola para o final
        }

        // Fun√ß√£o para construir o contexto dos recursos do curso para a IA
        function getCourseContext() {
            let context = "Recursos do curso IA Magn√©tica i Cume:\n";
            for (const item in courseFeatures) {
                context += `- ${item}: ${courseFeatures[item]}\n`;
            }
            return context;
        }

        // Lida com o envio do formul√°rio de chat
        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const userText = userInput.value.trim();
            if (!userText) return; // N√£o envia mensagem vazia

            addMessage('user', userText); // Adiciona a mensagem do usu√°rio ao chat
            userInput.value = ''; // Limpa o input
            sendButton.disabled = true; // Desabilita o bot√£o de enviar
            loadingIndicator.classList.remove('hidden'); // Mostra o indicador de carregamento

            try {
                const courseContext = getCourseContext();
                // ==============================================
                // PROMPT DA IA (INSTRU√á√ïES)
                // Aqui voc√™ define a "personalidade" e as "regras" da sua IA.
                // ==============================================
                const prompt = `Voc√™ √© um atendente de chat de intelig√™ncia artificial criado para fornecer informa√ß√µes sobre o curso "IA Magn√©tica i Cume" e incentivar sua aquisi√ß√£o. Voc√™ mesmo √© um exemplo do que o curso ensina.
                O curso "IA Magn√©tica i Cume" oferece os seguintes benef√≠cios e funcionalidades:
                ${courseContext}
                O usu√°rio disse: '${userText}'.
                Responda como um atendente entusiasmado e informativo, focado em como o curso pode beneficiar o usu√°rio. Seja conciso e direto.
                - Destaque os principais benef√≠cios: acesso vital√≠cio, uso ilimitado por 15 meses da IA para v√≠deos virais com Google, e como vender v√≠deos para monetizar views.
                - Se a pergunta for sobre um recurso espec√≠fico do curso, responda usando as informa√ß√µes fornecidas.
                - Se a pergunta for geral sobre o curso, resuma os pontos mais importantes e mencione que voc√™ √© um exemplo pr√°tico.
                - Se a pergunta n√£o estiver diretamente relacionada aos recursos do curso, tente redirecionar para um benef√≠cio ou funcionalidade do "IA Magn√©tica i Cume".
                - N√£o invente informa√ß√µes ou pre√ßos.
                - Sempre incentive o usu√°rio a adquirir o curso.
                - O link de compra do curso √©: https://pay.kiwify.com.br/HOcl3Dg?afid=HIal80Cy. Voc√™ pode mencion√°-lo se for relevante ou solicitado.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                // A chave da API ser√° fornecida automaticamente pelo ambiente Canvas
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const aiText = result.candidates[0].content.parts[0].text;
                    addMessage('ai', aiText); // Adiciona a resposta da AI ao chat
                } else {
                    addMessage('ai', 'Desculpe, n√£o consegui entender sua solicita√ß√£o. Poderia repetir ou perguntar de outra forma?');
                    console.error("Estrutura de resposta da API inesperada:", result);
                }
            } catch (error) {
                console.error("Erro ao comunicar com a AI:", error);
                addMessage('ai', 'Ocorreu um erro ao processar sua solicita√ß√£o. Por favor, tente novamente mais tarde.');
            } finally {
                sendButton.disabled = false; // Habilita o bot√£o de enviar novamente
                loadingIndicator.classList.add('hidden'); // Oculta o indicador de carregamento
            }
        });

        // Configura√ß√£o inicial ao carregar a janela - Sequ√™ncia de introdu√ß√£o
        window.onload = async () => {
            displayCourseFeatures(); // Exibe os recursos do curso

            // Mensagem 1
            addMessage('ai', 'üß†üí• Oi! Eu sou um chat de intelig√™ncia artificial criado com IA ‚Äî ou seja, eu mesmo sou um exemplo do que voc√™ vai aprender no curso IA Magn√©tica');
            await sleep(1500); // Pausa de 1.5 segundos

            // Mensagem 2: V√≠deo do YouTube Short
            addMessage('ai', '099JIPUnPxE', 'video'); // ID do YouTube Short
            await sleep(5000); // Pausa de 5 segundos para o usu√°rio ver o v√≠deo

            // Mensagem 3
            addMessage('ai', 'Ao adquirir o curso, voc√™ garante acesso vital√≠cio ao conte√∫do completo e ainda desbloqueia o uso ilimitado por 15 meses da IA que te ajuda a criar v√≠deos virais usando ferramentas como o Google.');
            await sleep(1500); // Pausa de 1.5 segundos

            // Mensagem 4: Link Final
            addMessage('ai', 'Acesse o curso e comece a transformar views em dinheiro: https://pay.kiwify.com.br/HOcl3Dg?afid=HIal80Cy');
        };
    </script>
</body>
</html>

